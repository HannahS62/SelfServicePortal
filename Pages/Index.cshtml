@page
@model IndexModel
@{
    ViewData["Title"] = "Home page";
}

<h1 class="display-3">Self Service Portal</h1>


<!-- Initial Buttons for App 1 and App 2 -->
<div class="btn-container">
    <button class="btn-tile" id="app1Button" onclick="showDropdown(1)">Order Progress</button>
    <button class="btn-tile" id="app2Button" onclick="showDropdown(2)">Credit Request</button>
</div>

<!-- Dropdown will be displayed based on which App button is clicked -->
<div id="formSelectorContainer" style="display: none; margin-top: 20px;">
    <label for="formSelector">Action:</label>
    <select id="formSelector" class="form-control" onchange="showForm()">
        <option value="">--Choose an action--</option>
        <!-- Options will be dynamically added here -->
    </select>
</div>

<!-- Forms for different options will be revealed based on dropdown selection -->

<div id="form1" class="form-section" style="display: none; margin-top: 20px;">
    <h3>Order Progress: </h3>
    <form>
        <!-- User Name Field -->
        <div class="mb-3">
            <label for="userName" class="form-label">User Name</label>
            <input type="text" class="form-control" id="userName" name="userName" placeholder="-- LastName, FirstName --">
        </div>
        
        <!-- User Email Field -->
        <div class="mb-3">
            <label for="userEmail" class="form-label">User Email</label>
            <input type="email" class="form-control" id="userEmail" name="userEmail"placeholder="-- firstName.lastName@em.com --">
        </div>
        
        <!-- App Group Dropdown -->
        <div class="mb-3">
            <label for="appGroup" class="form-label">App Group</label>
            <select class="form-control" id="appGroup" name="appGroup">
                <option value="sec0">--Choose Security Group--</option>
                <option value="sec1">SecOpStandard --Branch Users--</option>
                <option value="sec2">SecOPAll --Branch Managers--</option>
                <option value="sec3">SecOpEdit --VA Team--</option>
            </select>
        </div>
        
         <!-- Group Field (Initially hidden) -->
        <div id="appGroupField" class="mb-3" style="display: none;">
            <label for="appGroup" class="form-label">Group</label>
            <input type="text" class="form-control" id="appGroup" name="appGroup">
        </div>

        <button type="submit" class="btn btn-primary">Submit</button>
    </form>
</div>

<script>
    // Show/Hide Group field based on App Group selection
    document.getElementById('appGroup').addEventListener('change', function() {
        var groupField = document.getElementById('appGroupField');
        if (this.value === 'sec1') {
            groupField.style.display = 'block';
        } else {
            groupField.style.display = 'none';
        }
    });
</script>

<div id="form2" class="form-section" style="display: none; margin-top: 20px;">
    <h3>App1 Form</h3>
    <form>
        <div class="mb-3">
            <label for="orderProgress" class="form-label">App1</label>
            <input type="text" class="form-control" id="orderProgress" name="orderProgress">
        </div>
        <button type="submit" class="btn btn-primary">Submit</button>
    </form>
</div>
<div id="form2" class="form-section" style="display: none; margin-top: 20px;">
    <h3>App2 Form</h3>
    <form>
        <div class="mb-3">
            <label for="creditRequest" class="form-label">App2</label>
            <input type="text" class="form-control" id="creditRequest" name="creditRequest">
        </div>
        <button type="submit" class="btn btn-secondary">Submit</button>
    </form>
</div>

<script>
    // Function to show the dropdown options depending on which App button is clicked
    function showDropdown(appId) {
        // Show the dropdown container
        document.getElementById('formSelectorContainer').style.display = 'block';

        // Clear any previous options
        const formSelector = document.getElementById('formSelector');
        formSelector.innerHTML = '<option value="">--Choose an action--</option>'; // Reset options

        // Based on the button clicked, add the appropriate options to the dropdown
        if (appId === 1) {
            // App 1 selected: Add "Order Progress" option
            formSelector.innerHTML += '<option value="1">Add an Application User</option>';
            formSelector.innerHTML += '<option value="2">Update an existing Applicaiton User</option>';
        } else if (appId === 2) {
            // App 2 selected: Add "Credit Request" option
            formSelector.innerHTML += '<option value="2">Add Controller</option>';
            formSelector.innerHTML += '<option value="2">Add Auhtoriser</option>';
        }
    }

    // Function to show the relevant form based on dropdown selection
    function showForm() {
        const selectedValue = document.getElementById('formSelector').value;

        // Hide all forms first
        document.getElementById('form1').style.display = 'none';
        document.getElementById('form2').style.display = 'none';


        // Show the relevant form based on the selected value
        if (selectedValue === '1') {
            document.getElementById('form1').style.display = 'block';
        } else if (selectedValue === '2') {
            document.getElementById('form2').style.display = 'block';
        }
    }
</script>
